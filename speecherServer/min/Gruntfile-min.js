"use strict";var request=require("request");module.exports=function(e){require("time-grunt")(e),require("load-grunt-tasks")(e);var s=35729,i;e.initConfig({pkg:e.file.readJSON("package.json"),develop:{server:{file:"bin/www"}},watch:{options:{nospawn:!0,livereload:s},server:{files:["bin/www","app.js","routes/*.js"],tasks:["develop","delayed-livereload"]},js:{files:["public/js/*.js"],options:{livereload:s}},angular:{files:["public/angularjs/*.js"],options:{livereload:s}},css:{files:["public/css/*.css"],options:{livereload:s}},views:{files:["views/*.jade"],options:{livereload:s}}}}),e.config.requires("watch.server.files"),i=e.config("watch.server.files"),i=e.file.expand(i),e.registerTask("delayed-livereload","Live reload after the node server has restarted.",function(){var r=this.async();setTimeout(function(){request.get("http://localhost:"+s+"/changed?files="+i.join(","),function(s,i){var l=!s&&200===i.statusCode;l?e.log.ok("Delayed live reload successful."):e.log.error("Unable to make a delayed live reload."),r(l)})},500)}),e.registerTask("default",["develop","watch"])};